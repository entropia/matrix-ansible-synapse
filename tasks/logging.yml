---
- name: create logging folder
  file:
    name: /var/log/synapse/
    state: directory
    owner: synapse
    group: synapse

- name: copy syslog config
  copy:
    src: matrix_synapse.conf
    dest: /etc/rsyslog.d/matrix_synapse.conf
    owner: root
  notify: restart rsyslog

- name: template logrotate config
  template:
    src: logrotate.j2
    dest: /etc/logrotate.d/matrix_synapse

- name: Deploy log config
  template:
    src: "log.config.j2"
    dest: "/opt/synapse/log.config"
    owner: synapse
    group: synapse
  notify:
    - "restart synapse"


